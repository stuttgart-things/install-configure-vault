---
- hosts: "localhost"
  gather_facts: true
  become: false
  vars:
    # default configuration
    vault_url: https://vault.labul.sva.de:8200
    vault_token: "'{{ lookup('env', 'VAULT_TOKEN') }}'" # Only use if no user exists to auth

    # Create user
    vault_create_user: true
    vault_crate_user_data:
      - name: bernd
        password: bernd123
        policies: admin
  roles:
    - install-configure-vault